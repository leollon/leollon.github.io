---
title: Routing
date: 2019-08-15 12:37:59
categories: Sams-Teach-yourself-TCP/IP-in-24-hours
tags: [notes, TCP/IP, Networks]
---

本文目的：

- 描述IP转发以及它是如何工作的
- 分辨距离向量路由和链路状态路由
- 讨论核心，内部和外部路由的角色
- 描述公共内部路由RIP以及OSPF协议

## Routing in TCP/IP

在最基本的性质中，一个路由器（router）是通过逻辑地址（logical address）转发流量的一个个设备。一个经典的路由器使
用Internet layer头部的IP地址信息工作在Internet layer（对应于OSI模型中的网络层（Network layer））。因为OSI
中网络层也称为第三层，因此有时候又称一个路由器为第三层设备。还有更高层的路由器（位于OSI模型中的4-7层）。

路由器是任何大型TCP/IP网络必需的部分。当路由器从一个网络传递数据到下一个网络时，路由器替换网络层（Network 
Access layer）头部信息，所以路由器能够连接不相似的网络类型。许多路由器维护着基于距离，带宽以及时间考虑的最佳路径
的详细信息。

## What Is a Router

在最简单的形式（或至少在最基本形式中），一个路由器看起来就像是一台有两个网络适配器的计算机。早期的路由器确实是有两
个或更多网络适配器的计算机（称之为多重连接计算机）。理解路由的第一步是要记住IP地址是属于适配器而不是计算机。事实
上，两个适配器是有可能处在对应于完全不同物理网络的完全不同的IP子网上。

![e7dc4d3cf4c249b8.svg](https://i.quantuminit.com/e7dc4d3cf4c249b8.svg)

复杂网络上的路由：

![7be3ab7d8e30478d.svg](https://i.quantuminit.com/7be3ab7d8e30478d.svg)

## The Routing process

路由器职责的一个更普遍的描述：

1. 路由器从它连接的网络之一接收数据。
2. 路由器往协议栈向上传递数据到Internet layer。换句话说，路由器丢弃Network Access 层的头部信息并且重组（如果
有必要）数据报。
3. 路由器检查IP头部中的目的地址。
4. 如果数据注定要发往不同的网络，路由器查询路由表来决定往哪个地方发送数据。
5. 在路由器决定它的哪个适配器将接收数据之后，它将会向下传递数据通过适合的Network Access层软件通过适配器具进行传输。

事实上，路由表以及建立路由表的协议是路由器的明显特征。

路由过程图示：

![a188425ba8714eed.svg](https://i.quantuminit.com/a188425ba8714eed.svg)

根据获取路由表信息来源，命名的路由的两种主要类型：

- 静态路由：需要网络管理员后动输入路由信息
- 动态路由：使用路由协议基于获取的路由信息动态建立路由表。

静态路由局限性:

1. 不能很好地适配具有成百上千个路由的大型网络
2. 除了最简单的网络之外的所有网络，静态路由需要网络管理员不成比例的时间投入，网络管理员不仅仅是创建而且不断的更新
路由表信息。
3. 静态路由不能很快的适应网络，例如，一个宕机的路由器。
